<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Smart City Tracker</title>
        <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v5.15.4/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Varela+Round" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
        <!--jquery js-->
        <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
        <!--jQuery UI files-->
        <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" />
        <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js" integrity="sha256-T0Vest3yCU7pafRw9r+settMBX6JkKN06dqBnpQ8d30=" crossorigin="anonymous"></script>
        <!--jQuery UI Touch js, required for touchscreen use-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"></script>
        <!-- leaflet files -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.css" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.js"></script>
        <!--Leaflet Time-Slider module js adapted from Brian Geyer (https://github.com/geyerbri) with thanks; find maintained version at https://github.com/geyerbri/LeafletSlider-->
        <script src="js/SliderControl.js"></script>
    </head>
    <body id="page-top">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
            <div class="container px-4 px-lg-5">
                <a class="navbar-brand" href="#page-top">Smart City Tracker</a>
                <button class="navbar-toggler navbar-toggler-right" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                    Menu
                    <i class="fas fa-bars"></i>
                </button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item"><a class="nav-link" href="#about">About</a></li>
                        <li class="nav-item"><a class="nav-link" href="#map">Map</a></li>
                        <li class="nav-item"><a class="nav-link" href="#data">Data</a></li>
                        <li class="nav-item"><a class="nav-link" href="#contact">Contact</a></li>
                    </ul>
                </div>
            </div>
        </nav>
        <!-- Masthead-->
        <header class="masthead">
            <div class="container px-4 px-lg-5 d-flex h-100 align-items-center justify-content-center">
                <div class="d-flex justify-content-center">
                    <div class="text-center">
                        <h1 class="mx-auto my-0 text-uppercase">Smart City Tracker</h1>
                        <h2 class="text-white-50 mx-auto mt-2 mb-5">A living archive of smart city prevalence</h2>
                        <a class="btn btn-primary" href="#about">More</a>
                    </div>
                </div>
            </div>
        </header>
        <!-- About-->
        <section class="about-section text-center" id="about">
            <div class="container px-4 px-lg-5">
                <div class="row gx-4 gx-lg-5 justify-content-center">
                    <div class="col-lg-8">
                        <h2 class="text-white mb-5">Where are the smart cities?</h2>
                        <p class="text-white-50 mb-3" align="left">
                          Smart cities are municipal entities that incorporate information and communications technologies into city management.
                          Though they are gaining in popularity, where are they actually being launched?
                        </p>
                        <p class="text-white-50 mb-3" align="left">
                          Smart City Tracker is a web-based and open-source platform where you can track and explore local governments’ smart city implementation in the United States.
                          It uses Google Custom Search API to search the official websites of 322 cities with a population of more than 100,000. If a city mentions “smart city” on its website,
                          Smart City Tracker drops a pin at its corresponding location. So, Smart City Tracker simply maps out what cities are talking about being smart.
                          The map and datasets are updated monthly starting January 2022 and serves as a living archive of smart city prevalence.
                        </p>
                        <p class="text-white-50 mb-3" align="left">
                        You can drag the slider on the top right of the map to see search results at different times and click on a pin to read more.
                        The links will take you to city webpages where the smart city concept is being discussed.
                        </p>
                        <br>
                        <br>
                    </div>
                </div>
            </div>
        </section>
        <!-- Map-->
        <section class="map-section text-center">
            <div id="map" style="height:800px"></div>
            <script>
            var map = L.map('map', {minZoom:4, maxZoom:10, scrollWheelZoom:false}).setView([37.09024, -95.712891], 5);
            var light = L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
              attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>, &copy; <a href="https://carto.com/attribution">CARTO</a>'
            }).addTo(map);
            // change icon
            var myicon = L.icon({
              iconUrl:'./assets/img/pin.svg',
              iconSize: [20, 40]
            });
            // define optionsObject
            var optionsObject = {
              onEachFeature: onEachFeature,
              pointToLayer: function (feature, latlng) {
                return L.marker(latlng, {icon: myicon});
              }
            };
            // define onEachFeature
            function onEachFeature (feature, layer) {
                //var content = "<div style='clear: both'></div><div><h4>" + feature.properties.title + "</h4><p>" + feature.properties.time + "</p><p>" + feature.properties.description + "</p></div>";
                var content = "<div style='clear: both'></div><div><h4>" + feature.properties.title + "</h4><p>" + feature.properties.description + "</p></div>";
                layer.bindPopup(content, {closeButton: true});
            };
            // map data
            $.getJSON('./assets/data/data202201.js', function(json){
              var group1 = L.geoJSON(json, optionsObject);
              $.getJSON("./assets/data/data202202.js", function(json2){
                var group2 = L.geoJSON(json2, optionsObject);
                $.getJSON("./assets/data/data202203.js", function(json3){
                  var group3 = L.geoJSON(json3, optionsObject);
                  $.getJSON("./assets/data/data202204.js", function(json4){
                    var group4 = L.geoJSON(json4, optionsObject);
                    group1.options.time = "2022.01";
                    group2.options.time = "2022.02";
                    group3.options.time = "2022.03";
                    group4.options.time = "2022.04";
                    var multiLayers = L.layerGroup([group1, group2, group3, group4]);
                    var sliderControl1 = L.control.sliderControl({
                      layer: multiLayers,
                      alwaysShowDate: true,
                      showAllPopups: false, // to show all popups, instead of one, same as popup option "autoClose: false"
                      showPopups: false // to set it so, when a marker is generated by the slider, its popup doesn't automatically display
                    });
                    map.addControl(sliderControl1);
                    sliderControl1.startSlider();
                  });
                });
              });
            });
            </script>
        </section>
        <!-- Data-->
        <section class="about-section text-center" id="data">
            <div class="container px-4 px-lg-5">
                <div class="row gx-4 gx-lg-5 justify-content-center">
                    <div class="col-lg-8">
                        <h2 class="text-white mb-4">Data</h2>
                        <p class="text-white-50">
                        You can download the data in JSON format <a href="https://github.com/caimeng2/SmartCityTracker/tree/master/assets/data" target="_blank">here</a> and use it for your own project.
                        </p>
                    </div>
                </div>
            </div>
        </section>
        <!-- Contact-->
        <section class="contact-section bg-black" id="contact">
            <div class="container px-4 px-lg-5">
               <div class="row gx-4 gx-lg-5 justify-content-center">
                  <div class="col-lg-8">
                      <h2 class="text-white mb-4">Contact</h2>
                      <p class="text-white-50">
                      This site was built by Meng Cai, PhD candidate at <a href="https://www.canr.msu.edu/people/meng-cai?profileDisplayContent=contactInfo" target="_blank">Michigan State Univeristy</a>
                      and <a href="https://www.verkehr.tu-darmstadt.de/vv/das_institut_ivv/team_ivv/wissenschaftliche_mitarbeiter_doktoranden/meng_cai/standardseite_204.de.jsp" target="_blank">Technische Universität Darmstadt</a>,
                      as part of the <a href="https://chi.anthropology.msu.edu/fellowships/" target="_blank">Cultural Heritage Informatics Fellowship</a>.
                      </p>
                  </div>
                </div>
              </div>
              <div class="social d-flex justify-content-center">
                  <a class="mx-2" href="https://github.com/caimeng2/SmartCityTracker" target="_blank"><i class="fab fa-github"></i></a>
              </div>
            </div>
        </section>
        <!-- Footer-->
        <footer class="footer bg-black small text-center text-white-50"><div class="container px-4 px-lg-5">Copyright &copy; Smart City Tracker 2022</div></footer>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
        <script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>
    </body>
</html>
